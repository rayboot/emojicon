apply plugin: 'android-library'
apply plugin: 'maven'
apply plugin: 'signing'

ext.emojiconVersionName = "1.1-SNAPSHOT"
android {
    compileSdkVersion 19
    buildToolsVersion '19.0.3'

    defaultConfig {
        minSdkVersion 8
        targetSdkVersion 19
        versionCode 1
        versionName emojiconVersionName
    }
    lintOptions {
        abortOnError false
    }
}

dependencies {
  compile 'com.android.support:support-v4:19.+'
}

group = 'com.rockerhieu.emojicon'
version = emojiconVersionName
ext.isReleaseVersion = !version.endsWith("SNAPSHOT")


task sourcesJar(type: Jar) {
    from android.sourceSets.main.allJava
    classifier = 'sources'
}

artifacts {
    archives sourcesJar
}

signing {
    required { isReleaseVersion && gradle.taskGraph.hasTask("uploadArchives") }
    sign configurations.archives
}

task getVersion << {
    println "$System.env.SONATYPE_USERNAME"
    println "$System.env.SONATYPE_PASSWORD"
    println version
}